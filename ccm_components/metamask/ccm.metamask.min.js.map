{"version":3,"file":"ccm.metamask.min.js","sources":["ccm.metamask.js"],"sourcesContent":["/**\n * @component ccm-web3\n * @author René Müller <rene.mueller@smail.inf.h-brs.de> 2019\n * @license MIT License\n * @version 1.0.0\n */\n\n/**\n * MetaMask attributes, functions and events\n *\n * @attribute: isMetaMask: bool\n * @attribute: networkVersion: string\n * @attribute: selectedAddress: string\n *\n * @function: isConnected: bool\n * @function: enable: Promise\n *\n * @events: accountsChanged\n *\n */\n\n( function () {\n\n    const component = {\n\n        name: 'metamask',\n\n        ccm: {\n            url: 'https://ccmjs.github.io/ccm/versions/ccm-18.6.8.min.js',\n            integrity: 'sha384-PnqnIRmePKkglGAFgJCKvXYVLkMYjZ+kySHxtNQS0kH2dIXKwISMKu2irzx+YyCY',\n            crossorigin: 'anonymous'\n        },\n\n        config: {},\n\n        Instance: function () {\n\n            /* Lifecycle */\n\n            this.init   = async () => {};\n            this.ready  = async () => {};\n            this.start  = async () => {};\n\n\n            /* Functions */\n\n            this.getProvider = () =>\n                this.isMetaMask() ? window['ethereum'] : false;\n\n            this.isMetaMask = () => {\n                return !(\n                    typeof window['ethereum'] === 'undefined' ||\n                    typeof window['ethereum']['isMetaMask'] === 'undefined' ||\n                    !ethereum.isConnected()\n                );\n            };\n\n            this.getNetworkVersion = () => {\n                return ethereum.networkVersion;\n            };\n\n            this.getSelectedAddress = () => {\n                return ethereum.selectedAddress;\n            };\n\n            this.connectToMetaMask = () => {\n                ethereum.enable()\n                    .catch(reason => console.error(reason))\n                    .then(accounts => console.log(accounts));\n            };\n\n            this.registerEvent = (event, callback) => {\n                ethereum.on(event, accounts => callback(accounts));\n            };\n        }\n    };\n\n    let b=\"ccm.\"+component.name+(component.version?\"-\"+component.version.join(\".\"):\"\")+\".js\";if(window.ccm&&null===window.ccm.files[b])return window.ccm.files[b]=component;(b=window.ccm&&window.ccm.components[component.name])&&b.ccm&&(component.ccm=b.ccm);\"string\"===typeof component.ccm&&(component.ccm={url:component.ccm});let c=(component.ccm.url.match(/(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)/)||[\"latest\"])[0];if(window.ccm&&window.ccm[c])window.ccm[c].component(component);else{var a=document.createElement(\"script\");document.head.appendChild(a);component.ccm.integrity&&a.setAttribute(\"integrity\",component.ccm.integrity);component.ccm.crossorigin&&a.setAttribute(\"crossorigin\",component.ccm.crossorigin);a.onload=function(){window.ccm[c].component(component);document.head.removeChild(a)};a.src=component.ccm.url}\n} )();"],"names":["component","b","c","a","reason","accounts","event","callback"],"mappings":"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"}